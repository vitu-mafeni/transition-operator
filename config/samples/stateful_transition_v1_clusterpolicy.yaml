# propagationpolicy-update.yaml
apiVersion: transition.dcnlab.ssu.ac.kr/v1
kind: ClusterPolicy
metadata:
  name: clusterpolicy-sample
spec:
  clusterSelector:
    name: cluster1-azure
    repo: http://3.0.52.147:30782/nephio/cluster1-azure.git # repo where the cluster workloads is defined
    repoType: git
  packageSelectors:
    - name: video # Package Name
      packagePath: video # where the package is in the repo
      packageType: Stateful # Stateless, Stateful
      liveStatePackage: true
      backupInformation:
        # - name: my-test-backup # Backup Name
        #   backupType: Manual # Manual, Schedule
        - name: my-test-backup # Schedule Name
          backupType: Schedule # Manual, Schedule
          schedulePeriod: "*/2 * * * *" # cron format
    - name: redis # Package Name
      packagePath: redis # where the package is in the repo
      packageType: Stateful # Stateless, Stateful
      liveStatePackage: true
      backupInformation:
        # - name: my-test-backup # Backup Name
        #   backupType: Manual # Manual, Schedule
        - name: my-test-backup1 # Schedule Name
          backupType: Schedule # Manual, Schedule
          schedulePeriod: "*/2 * * * *" # cron format
  targetClusterPolicy:
    preferClusters:
      - name: cluster2-aws
        repoType: git
        weight: 100
